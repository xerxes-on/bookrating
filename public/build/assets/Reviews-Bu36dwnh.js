import{_ as B}from"./Layout-6o8BjmJW.js";import{b as M}from"./book-D1Fl5hLm.js";import{a as C,b as R,r as c,B as F,I as N,l as $,d as o,o as t,e as s,O as v,F as k,f as y,t as h,n as j,j as d,p as w,g as A,N as T}from"./app-CFGuSI1Y.js";import{f as U}from"./utilities-BIASTeKs.js";import{_ as z}from"./FollowButton-c5hp8NLh.js";import{_ as D}from"./LikeButton-BC7s-dlV.js";import"./client-DX3z9xpM.js";const L={class:"bg-primary min-h-screen p-4 flex flex-col items-center"},O={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4 max-w-screen-xl w-full"},P={key:0,class:"w-1/4 text-center"},E={class:"flex items-center justify-center"},I=["src"],q={class:"ml-2 font-semibold text-xl"},G={class:"flex justify-center text-2xl items-center mt-2"},H={class:"flex-1 pl-3"},J={class:"text-gray text-xl"},K={class:"mt-2 text-gray-800 text-sm leading-relaxed"},Q={class:"flex w-1/2 space-x-4 mt-4"},W=["disabled"],X={key:0},Y={key:1},Z={__name:"Reviews",setup(b){const u=C(),_=R(),i=c([]),m=c(0),f=c(null),r=c(!1),S=F(()=>f.value!==null&&m.value<f.value);async function g(p=1){if(!r.value){r.value=!0,u.loading=!0;try{const a=await M.getReviews(p);if(a.status===200){const l=a.data;if(p===1)i.value=l.data;else{const e=new Set(i.value.map(x=>x.id)),n=l.data.filter(x=>!e.has(x.id));i.value.push(...n)}m.value=l.current_page,f.value=l.last_page}else _.error(a.data.message)}catch(a){_.error("Oops! Something went wrong"),console.error(a)}finally{r.value=!1,u.loading=!1}}}function V(){g(m.value+1)}return N(()=>{g(1)}),(p,a)=>{const l=$("router-link");return t(),o("div",L,[a[0]||(a[0]=s("h1",{class:"text-center text-2xl font-bold mb-6"}," Most popular 100 reviewers this week ",-1)),s("div",O,[(t(!0),o(k,null,y(i.value,e=>(t(),o("div",{key:e.id,class:"flex bg-primary p-4 rounded-xl shadow-sm space-x-4"},[e.user?(t(),o("div",P,[s("div",E,[s("img",{src:e.user.profile_picture,alt:"User Avatar",class:"w-16 h-16 rounded-full bg-cover"},null,8,I),s("div",null,[s("p",q,h(e.user.name),1)])]),s("div",G,[(t(),o(k,null,y(5,n=>s("span",{key:n},[s("i",{class:j(["text-yellow",n<=e.rating/2?"fa-solid fa-star":"fa-regular fa-star"])},null,2)])),64))]),s("div",null,[d(z,{whoToFollow:e.user.id,modelValue:e.user.is_followed,"onUpdate:modelValue":n=>e.user.is_followed=n},null,8,["whoToFollow","modelValue","onUpdate:modelValue"])])])):v("",!0),s("div",H,[d(l,{to:{name:"book",params:{id:e.book_id},hash:"#xyz"}},{default:w(()=>[s("p",J,h(A(U)(e.created_at)),1),s("p",K,h(e.comment),1)]),_:2},1032,["to"]),s("div",Q,[d(D,{id:e.id,like_what:"review",count:e.likes,liked:e.is_liked},null,8,["id","count","liked"])])])]))),128))]),S.value?(t(),o("button",{key:0,onClick:V,disabled:r.value,class:"bg-dark_blue text-white text-xl p-2 rounded-2xl m-5 hover:shadow-2xl"},[r.value?(t(),o("span",X,"Loadingâ€¦")):(t(),o("span",Y,"See More"))],8,W)):v("",!0)])}}},re={__name:"Reviews",setup(b){return(u,_)=>(t(),T(B,null,{default:w(()=>[d(Z)]),_:1}))}};export{re as default};
