import{_ as st}from"./Layout-7GVt9__E.js";import{f as K}from"./utilities-BIASTeKs.js";import{b as q}from"./book-BEXCJ5ug.js";import{r as g,I as Q,A as lt,d,o as i,e as t,O as y,t as n,F as _,f as k,g as T,n as $,j as S,$ as ot,a0 as at,_ as nt,b as X,a as Z,c as rt,y as it,m as R,M as dt,J as ut,w as G,v as ct,i as mt,a1 as tt,a2 as ft,B as xt,N as et,p as vt}from"./app-U-tfp683.js";import{c as bt}from"./client-CJmJGNi5.js";import{_ as pt,f as gt}from"./FollowButton-CDHvaeJz.js";import{_ as wt}from"./LikeButton-BHHlkyap.js";import{k as ht}from"./index-DqW9W4z6.js";/* empty css                *//* empty css                                                               */const _t=(l,x)=>bt.post(`/all-reviews/${l}/?page=${x}`).then(m=>m).catch(m=>m.response),yt={getReviews:_t},kt={class:"mt-12 p-6 rounded-2xl"},$t={class:"text-gray-500 mb-6"},Rt=["id"],jt=["src"],Bt={class:"font-semibold"},Ct={class:"text-sm text-gray-400"},Ft={class:"flex items-center ml-10"},Mt={class:"flex justify-center text-2xl items-center mt-2"},St={class:"mb-2"},Vt={class:"flex items-center space-x-4"},At={key:0,class:"text-center py-4"},Nt={key:1,class:"text-center py-4 text-gray-400"},Tt={__name:"Reviews",props:{bookId:{type:[String,Number],required:!0}},setup(l){const x=l,m=g([]),v=g(1),o=g(null),a=g(!1),c=async()=>{if(!a.value&&!(o.value&&v.value>o.value)){a.value=!0;try{const b=await yt.getReviews(x.bookId,v.value);m.value.push(...b.data.data),o.value=b.data.last_page,v.value++}finally{a.value=!1}}},s=()=>{const{scrollTop:b,clientHeight:w,scrollHeight:u}=document.documentElement};return Q(()=>{c(),window.addEventListener("scroll",s)}),lt(()=>{window.removeEventListener("scroll",s)}),(b,w)=>(i(),d("section",kt,[w[0]||(w[0]=t("h2",{class:"text-4xl font-bold mb-4"},"Reader Reviews",-1)),t("p",$t,"Total loaded: "+n(m.value.length),1),(i(!0),d(_,null,k(m.value,u=>(i(),d("div",{key:u.id,class:"mb-6 p-4 bg-white rounded-xl shadow"},[t("div",{class:"flex items-center mb-2",id:"review-id-"+u.id},[t("img",{src:u.user.profile_picture,class:"w-12 h-12 rounded-full mr-3"},null,8,jt),t("div",null,[t("p",Bt,n(u.user.name),1),t("p",Ct," @"+n(u.user.username)+" • "+n(T(K)(u.created_at)),1)]),t("div",Ft,[t("div",Mt,[(i(),d(_,null,k(5,p=>t("span",{key:p},[t("i",{class:$(["text-yellow",p<=u.rating/2?"fa-solid fa-star":"fa-regular fa-star"])},null,2)])),64))])])],8,Rt),t("p",St,n(u.comment),1),t("div",Vt,[S(wt,{count:u.likes,liked:u.is_liked,id:u.id,like_what:"review"},null,8,["count","liked","id"]),S(pt,{whoToFollow:u.user.id},null,8,["whoToFollow"])])]))),128)),a.value?(i(),d("div",At,"Loading more…")):o.value&&v.value>o.value?(i(),d("div",Nt," No more reviews. ")):y("",!0)]))}},Dt={__name:"FollowAuthorButton",props:ot({author:{required:!0,type:Object}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const x=at(l,"modelValue"),m=async v=>{try{const o=await gt.followAuthor(v);o.status===200?x.value=!x.value:console.log(o.data)}catch(o){console.log(o)}};return(v,o)=>(i(),d("button",{onClick:o[0]||(o[0]=a=>{var c,s;return m((s=(c=l.author)==null?void 0:c.data)==null?void 0:s.id)}),class:"mt-2 bg-dark_blue text-white px-10 py-1 rounded-full text-sm hover:bg-light_blue"},n(x.value?"Unfollow":"Follow"),1))}},qt={key:0,class:"mt-12 flex relative p-6 bg-primary"},It={class:"w-2/3 relative py-14"},Ot={class:"flex flex-col justify-between"},Pt={class:"w-full h-16"},Ut=["src"],Wt={class:"text-4xl font-bold mb-10"},Et={class:"text-gray-600"},Ht={class:"font-bold text-dark_blue text-xl"},Lt={class:"text-gray-700 mt-2"},zt={class:"mb-6 max-w-4xl mx-auto"},Jt={class:"flip-card-front bg-orange p-4 md:p-6 rounded-2xl shadow-md w-full h-full flex flex-col md:flex-row justify-center items-center"},Yt={class:"w-full md:w-10/12 flex flex-col md:flex-row justify-between items-center relative"},Gt={class:"w-full md:w-1/2 flex flex-col justify-around items-center p-4"},Kt={class:"flex flex-col md:flex-row justify-between items-center w-full"},Qt={class:"w-full md:w-1/2 mt-6 md:mt-0 p-4"},Xt={class:"flex items-center mb-4 flex-wrap justify-center md:justify-start"},Zt={class:"text-lg text-center mr-2"},te={key:0,class:"w-full space-y-3 md:space-y-5"},ee={class:"text-xs md:text-sm whitespace-nowrap"},se={class:"mr-1"},le={class:"w-full bg-gray h-2 rounded-full mx-2"},oe={class:"text-xs md:text-sm"},ae={class:"flip-card-back bg-primary p-4 md:p-6 rounded-2xl w-full flex items-center justify-center"},ne={key:0,class:"p-4 bg-orange w-full md:w-2/3 rounded-2xl shadow-2xl"},re={key:0,class:"absolute celebrate left-1/2"},ie={class:"flex justify-center mb-4"},de=["src"],ue={class:"text-lg md:text-xl font-bold text-center text-gray-700 mb-2"},ce={class:"text-center text-gray-600 mb-4"},me={class:"flex space-x-2 justify-center items-center"},fe=["onMouseover","onClick"],xe={class:"flex justify-center mt-4"},ve={class:"w-full flex items-center justify-center md:justify-end mt-4"},be={__name:"Author",props:{author:{required:!0,type:Object},book:{type:Object,required:!0}},setup(l){const x=[{star:5,width:"80%",percent:"80%"},{star:4,width:"60%",percent:"60%"},{star:3,width:"40%",percent:"40%"},{star:2,width:"20%",percent:"20%"},{star:1,width:"10%",percent:"10%"}],m=l,v=g(m.author),o=g(!1);X();const a=Z(),c=g(0),s=rt({rating:c.value,comment:null,book_id:m.book.id}),b=g(!1),w=async()=>{try{a.loading=!0;const f=await q.rateBook(s);if((f==null?void 0:f.status)===200){const e=await q.getBookReviews(s.book_id);tt().reviews=e.data,u(3e3).then(()=>o.value=!o.value),b.value=!b.value}}catch{}finally{a.loading=!1}};function u(f){return new Promise(e=>setTimeout(e,f))}const p=g(0),V=f=>{c.value=f},A=f=>{p.value=f},N=()=>{p.value=0};return s.rating=c.value,it(c,f=>{s.rating=f}),(f,e)=>{var j,B,C,F,h,M,I,O,P,U,W,E,H,L,z,J,Y;return i(),d(_,null,[l.author?(i(),d("section",qt,[e[7]||(e[7]=t("div",{class:"absolute right-64 w-3/5 h-0.5 bg-dark_blue"},null,-1)),e[8]||(e[8]=t("span",{class:"w-1/2"},null,-1)),t("div",It,[t("div",Ot,[t("div",Pt,[t("img",{src:(B=(j=l.author)==null?void 0:j.data)==null?void 0:B.author_picture,alt:"Author Image",class:"w-40 h-40 absolute top-10 -left-1/3 rounded-full object-cover"},null,8,Ut)]),t("div",null,[t("div",null,[t("h3",Wt,n((F=(C=l.author)==null?void 0:C.data)==null?void 0:F.name),1),t("div",null,[S(Dt,{modelValue:v.value.isFollowed,"onUpdate:modelValue":e[0]||(e[0]=r=>v.value.isFollowed=r),author:l.author},null,8,["modelValue","author"])])]),t("p",Et,[e[4]||(e[4]=R(" No.of Books: ")),t("span",Ht,n((h=l.author)!=null&&h.books_count?(M=l.author)==null?void 0:M.books_count:"0"),1),e[5]||(e[5]=R("  |  Followers: ")),t("strong",null,n((O=(I=l.author)==null?void 0:I.data)!=null&&O.followers_count?(U=(P=l.author)==null?void 0:P.data)==null?void 0:U.followers_count:"0"),1)]),t("p",Lt,n((E=(W=l.author)==null?void 0:W.data)==null?void 0:E.about_author),1)]),e[6]||(e[6]=t("button",{class:"ml-auto bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700"}," Follow ",-1))])]),e[9]||(e[9]=t("div",{class:"absolute -bottom-2 right-64 b-0 w-3/5 h-0.5 bg-dark_blue"},null,-1))])):y("",!0),t("section",zt,[t("div",{class:$([["flip-card-inner",{flipped:o.value}],"w-full"])},[t("div",Jt,[t("section",Yt,[t("div",Gt,[e[11]||(e[11]=t("h2",{class:"text-4xl md:text-6xl font-tangerine font-bold mb-4"},"Rating & Reviews",-1)),e[12]||(e[12]=t("img",{alt:"User Avatar",class:"w-20 h-20 md:w-24 md:h-24 rounded-full mb-3",src:"https://randomuser.me/api/portraits/women/44.jpg"},null,-1)),e[13]||(e[13]=t("h1",{class:"text-xl md:text-2xl mb-3"},"What Do You Think?",-1)),t("div",Kt,[e[10]||(e[10]=dt('<div class="text-center mb-3 md:mb-0" data-v-db876101><div class="flex items-center text-lg md:text-xl space-x-1 md:space-x-2" data-v-db876101><i class="fas fa-star text-yellow-400" data-v-db876101></i><i class="fas fa-star text-yellow-400" data-v-db876101></i><i class="fas fa-star text-yellow-400" data-v-db876101></i><i class="fas fa-star text-gray-300" data-v-db876101></i><i class="fas fa-star text-gray-300" data-v-db876101></i></div><h1 class="pt-2 md:pt-4 text-base md:text-lg" data-v-db876101>Rate this Book</h1></div>',1)),t("button",{class:"bg-dark_blue text-white p-2 px-4 rounded-2xl hover:bg-light_blue mt-2 md:mt-0 md:ml-4",onClick:e[1]||(e[1]=r=>o.value=!o.value)}," Write a Review ")])]),t("div",Qt,[e[17]||(e[17]=t("h2",{class:"text-4xl md:text-6xl font-tangerine mb-4 text-center"},"Community Reviews",-1)),t("div",Xt,[t("div",Zt,[(i(),d(_,null,k(5,r=>t("span",{key:r},[t("i",{class:$(["text-yellow m-1 md:m-2",r<=4?"fa-solid fa-star":"fa-regular fa-star"])},null,2)])),64))]),e[14]||(e[14]=t("span",{class:"text-xl mr-2"},"4.5",-1)),e[15]||(e[15]=t("span",{class:"text-gray-500 text-sm md:text-base"},"(654 Ratings • 756 Reviews)",-1))]),x?(i(),d("div",te,[(i(),d(_,null,k(x,(r,D)=>t("div",{key:D,class:"flex items-center"},[t("div",ee,[t("span",se,n(r.star??"0"),1),e[16]||(e[16]=R("stars "))]),t("div",le,[t("div",{style:ut({width:r.width}),class:$(["h-2 rounded-full",r.star===1?"bg-red":"bg-green",r.star===2?"bg-orange_dark":""])},null,6)]),t("span",oe,n(r.percent),1)])),64))])):y("",!0)])])]),t("div",ae,[l.book?(i(),d("section",ne,[b.value?G((i(),d("div",re,null,512)),[[T(ht),{particleCount:1e3}]]):y("",!0),e[18]||(e[18]=t("h2",{class:"text-xl md:text-2xl font-bold text-center text-gray-700 mb-4"},"Write a Review",-1)),t("div",ie,[t("img",{src:(H=l.book)==null?void 0:H.image,alt:"Book cover",class:"w-24 h-24 md:w-32 md:h-32 object-cover rounded"},null,8,de)]),t("h3",ue,n((L=l.book)==null?void 0:L.title),1),t("p",ce,n((Y=(J=(z=l.book)==null?void 0:z.author)==null?void 0:J.data)==null?void 0:Y.name),1),t("div",me,[(i(),d(_,null,k(5,r=>t("span",{key:r,class:$(["text-3xl md:text-4xl cursor-pointer transition-transform duration-300",r<=p.value||r<=c.value?"text-yellow":"text-gray-300",r<=p.value?"scale-125":""]),onMouseover:D=>A(r),onMouseleave:N,onClick:D=>V(r)}," ★ ",42,fe)),64))]),t("div",xe,[G(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>s.comment=r),class:"w-full md:w-3/4 px-4 py-2 rounded-2xl",placeholder:"Write your review about this book",rows:"4"},null,512),[[ct,s.comment]])]),t("div",ve,[t("button",{class:"border-2 m-2 border-dark_blue rounded-2xl p-2 md:p-3 font-semibold text-sm md:text-base",onClick:e[3]||(e[3]=r=>o.value=!o.value)},"Cancel "),t("button",{class:"bg-dark_blue rounded-2xl p-2 md:p-3 text-white font-semibold text-sm md:text-base",type:"submit",onClick:mt(w,["prevent"])},"Submit ")])])):y("",!0)])],2)])],64)}}},pe=nt(be,[["__scopeId","data-v-db876101"]]),ge={key:0,class:"min-h-screen p-6 bg-primary text-gray-900"},we={class:"grid grid-cols-12 gap-8"},he={class:"col-span-4"},_e={class:"p-4 rounded-2xl shadow-md"},ye=["src"],ke={class:"col-span-8 p-8 rounded-2xl shadow-md"},$e={class:"text-3xl font-bold mb-2"},Re={class:"text-xl mb-4"},je={class:"flex items-center mb-4"},Be={class:"flex justify-center text-2xl items-center mt-2"},Ce={class:"ml-2 text-lg"},Fe={class:"text-gray-700 mb-6"},Me={class:"flex flex-wrap mb-4"},Se={class:"mt-8 grid grid-cols-2 gap-4"},Ve={class:"text-gray-600"},Ae={class:"mt-8"},Ne={class:"mt-2"},Te={__name:"Book",setup(l){const x=tt(),m=Z(),v=X(),o=ft();Q(async()=>{try{m.loading=!0;const c=await q.getBookDetails(o.params.id);c.status===200?x.book=c.data:v.error(c.data.message)}catch(c){v.error("Oops! "+c)}finally{m.loading=!1}});const a=xt(()=>x.book);return(c,s)=>{var b,w,u,p,V,A,N,f,e,j,B,C,F;return a.value?(i(),d("main",ge,[t("div",we,[t("div",he,[t("div",_e,[t("img",{src:(b=a.value)==null?void 0:b.image,alt:"Book Cover",class:"rounded-lg w-full h-auto"},null,8,ye),s[0]||(s[0]=t("div",{class:"mt-4"},[t("button",{class:"w-full bg-dark_blue text-white py-2 rounded-xl mb-2 hover:bg-blue-700"},"Currently Reading"),t("button",{class:"w-full bg-gray-300 text-gray-700 py-2 rounded-xl mb-2 hover:bg-gray-400"},"Want to Read"),t("button",{class:"w-full bg-gray-100 text-gray-700 py-2 rounded-xl hover:bg-gray-200"},"Finished Reading")],-1))])]),t("div",ke,[t("h1",$e,n((w=a.value)==null?void 0:w.title),1),t("h2",Re,n((p=(u=a.value)==null?void 0:u.author)==null?void 0:p.name),1),t("div",je,[t("div",Be,[(i(),d(_,null,k(5,h=>{var M;return t("span",{key:h},[t("i",{class:$(["text-yellow",h<=((M=a.value)==null?void 0:M.average_rating)/2?"fa-solid fa-star":"fa-regular fa-star"])},null,2)])}),64))]),t("span",Ce,n((V=a.value)==null?void 0:V.rating),1)]),t("p",Fe,[s[1]||(s[1]=t("br",null,null,-1)),s[2]||(s[2]=t("br",null,null,-1)),R(" "+n((A=a.value)==null?void 0:A.description),1)]),t("div",Me,[(i(!0),d(_,null,k((N=a.value)==null?void 0:N.categories,h=>(i(),d("span",{key:h,class:"bg-light_blue py-1 px-2 rounded-full mr-2 mb-2 hover:bg-gray hover:cursor-pointer"},n(h.category_name),1))),128))]),t("div",Se,[t("div",null,[s[3]||(s[3]=t("h3",{class:"text-lg font-semibold"},"Publication Details",-1)),t("ul",Ve,[t("li",null,"Published: "+n(T(K)((f=a.value)==null?void 0:f.created_at)),1)])])]),t("div",Ae,[t("p",null,[s[4]||(s[4]=t("i",{class:"fas fa-user"},null,-1)),R(" "+n((j=(e=a.value)==null?void 0:e.readers_stats)==null?void 0:j.reading)+" people are currently reading",1)]),t("p",Ne,[s[5]||(s[5]=t("i",{class:"fas fa-user"},null,-1)),R(" "+n((C=(B=a.value)==null?void 0:B.readers_stats)==null?void 0:C.want)+" people want to read",1)])])])]),S(pe,{author:(F=a.value)==null?void 0:F.author,book:a.value},null,8,["author","book"]),a.value?(i(),et(Tt,{key:0,"book-id":T(o).params.id},null,8,["book-id"])):y("",!0),s[6]||(s[6]=t("h1",{id:"xyz"},null,-1))])):y("",!0)}}},ze={__name:"Book",props:{book_id:{type:String,required:!0}},setup(l){return(x,m)=>(i(),et(st,null,{default:vt(()=>[S(Te,{id:l.book_id},null,8,["id"])]),_:1}))}};export{ze as default};
