import{_ as x,r,B,I as N,N as D,o as l,p as y,e,d as c,O as _,w as E,v as L,F as M,f as V,j,g as C,R as I,t as u}from"./app-CT_gfoAL.js";import{_ as R}from"./Layout-D793mtri.js";import{a as k}from"./author-BpnXb8gh.js";import"./client-t_DSb9yI.js";const S={class:"authors-container"},F={class:"search-container"},U={key:0,class:"search-loading"},$={class:"authors-grid"},O={class:"author-image-container"},P=["alt"],Q={class:"author-info"},T={class:"author-name"},q={class:"author-dates"},z={class:"author-books"},G={key:0,class:"empty-state"},H={key:1,class:"load-more-container"},J=["disabled"],K={__name:"Authors",setup(W){const d=r([]),n=r(!1),p=r(1),h=r(!1),o=r(""),i=r([]),v=r(!1),f=B(()=>o.value?i.value:d.value),m=async()=>{if(!(n.value||h.value)){n.value=!0;try{const s=(await k.getAuthors(p.value)).data.data||[];d.value=[...d.value,...s],s.length===0?h.value=!0:p.value++}catch(a){console.error("Error fetching authors:",a)}finally{n.value=!1}}},A=async()=>{if(!o.value.trim()){i.value=[];return}v.value=!0;try{const a=await k.searchAuthors(o.value);i.value=a.data.data||[]}catch(a){console.error("Error searching authors:",a),i.value=[]}finally{v.value=!1}},b=()=>{o.value||m()},g=a=>a?new Date(a).toLocaleDateString():"Unknown";return N(()=>{m()}),(a,s)=>(l(),D(R,null,{default:y(()=>[e("div",S,[s[2]||(s[2]=e("h1",{class:"page-title"},"Authors",-1)),e("div",F,[E(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.value=t),onInput:A,type:"text",placeholder:"Search authors...",class:"search-input"},null,544),[[L,o.value]]),v.value?(l(),c("div",U," Searching... ")):_("",!0)]),e("div",$,[(l(!0),c(M,null,V(f.value,t=>(l(),c("div",{key:t.id,class:"author-card"},[j(C(I),{to:`/author/${t.id}`,class:"author-link"},{default:y(()=>[e("div",O,[e("img",{src:"images/author.jpeg",alt:t.name,class:"author-image",onError:s[1]||(s[1]=w=>w.target.src="/images/default-author.jpg")},null,40,P)]),e("div",Q,[e("h3",T,u(t.name),1),e("p",q,u(g(t.date_of_birth))+" - "+u(t.date_died?g(t.date_died):"Present"),1),e("p",z,u(t.written_books.length)+" Books",1)])]),_:2},1032,["to"])]))),128))]),f.value.length===0&&!n.value?(l(),c("div",G,[e("p",null,u(o.value?"No authors found matching your search.":"No authors available."),1)])):_("",!0),!o.value&&!h.value?(l(),c("div",H,[e("button",{onClick:b,disabled:n.value,class:"load-more-button !bg-orange_dark"},u(n.value?"Loading...":"Load More Authors"),9,J)])):_("",!0)])]),_:1}))}},ae=x(K,[["__scopeId","data-v-7382c1b4"]]);export{ae as default};
