import{a4 as h,k as c,a5 as b,b as k,u as v,K as w,a1 as R,a6 as d,L as g}from"./app-CFGuSI1Y.js";const j=c(),i=h.create({baseURL:window.mainAppUrl,headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}),{token:u}=b(j);i.interceptors.request.use(e=>(u.value&&(e.headers.Authorization=`Bearer ${u.value}`),e),e=>Promise.reject(e));i.interceptors.response.use(e=>e,e=>{var a,n;const r=k(),s=(a=e.response)==null?void 0:a.status,t=(n=e.response)==null?void 0:n.data,S=v();if(s===422&&t.errors?Object.values(t.errors).flat().forEach(o=>r.warning(o)):t!=null&&t.message&&r.error(t.message),s===401||s===419){const o=c(),p=w(),l=R(),m=d(),f=g();o.resetStore(),p.resetStore(),l.resetStore(),m.resetStore(),f.resetProfile(),S.push({name:"login"})}return Promise.reject(e)});export{i as c};
